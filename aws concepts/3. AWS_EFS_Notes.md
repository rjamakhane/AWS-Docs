# 🟦 AWS Elastic File System (EFS) and Hybrid Storage

---

## ☁️ Overview of AWS EFS

Amazon **Elastic File System (EFS)** provides **scalable, serverless, elastic file storage** for use with AWS Cloud services and on-premises resources.

- **File-based storage system** (unlike EBS [block] or S3 [object]).
- Supports **NFS protocol** for mounting on EC2 instances.
- Automatically scales as files are added or removed.
- Designed for **multi-AZ**, **high availability**, and **shared access**.

![EFS Architecture](efs_architecture.png)  
> **Reference:** [AWS EFS Architecture](https://docs.aws.amazon.com/efs/latest/ug/whatisefs.html)

---

## 🔹 EFS Key Features

| Feature | Description |
|----------|-------------|
| **Type** | File storage |
| **Access** | Multiple EC2 instances simultaneously |
| **Scalability** | Automatically scales up/down |
| **Protocol** | NFSv4 |
| **Durability** | Multi-AZ redundancy |
| **Performance Modes** | General Purpose, Max I/O |
| **Throughput Modes** | Bursting, Provisioned |
| **Lifecycle Management** | Automatically move infrequently accessed files to Infrequent Access (IA) storage class |

---

## 🧩 How EFS Works

1. Create an **EFS file system** in a VPC.  
2. Mount the file system on **multiple EC2 instances** using NFS.  
3. Instances can **read/write simultaneously**.  
4. AWS handles storage growth automatically.

![EFS Mounting Example](efs_mount.png)  
> **Reference:** [Mounting EFS on EC2](https://docs.aws.amazon.com/efs/latest/ug/mounting-fs.html)

---

## 🧠 Comparison: EFS vs EBS vs S3

| Feature | **EFS** | **EBS** | **S3** |
|----------|----------|---------|--------|
| Storage Type | File | Block | Object |
| Multi-instance Access | ✅ Yes | ❌ No | ✅ Yes (via API) |
| Scalability | Auto | Manual | Unlimited |
| Access Protocol | NFS | Local Disk | HTTPS / API |
| Performance | High for parallel workloads | High for single-instance | Moderate |
| Use Case | Shared storage for EC2 | OS or App storage | Backup, Static content |
| Cost Model | Pay for used storage | Pre-provisioned | Pay per GB stored |

---

## 🧊 AWS Glacier — Archival Storage

**Amazon S3 Glacier** is designed for **data archiving and long-term backup**.

- Data retrieval can take **minutes to hours**.  
- Cheapest storage option in AWS.  
- Integrated with **S3 lifecycle policies** for automatic transition.  
- Ideal for **compliance, archives, and infrequent data access**.

![S3 Glacier](glacier_architecture.png)  
> **Reference:** [AWS Glacier Overview](https://docs.aws.amazon.com/amazonglacier/latest/dev/introduction.html)

---

## 🖇️ AWS Storage Gateway — Hybrid Storage

**AWS Storage Gateway** connects on-premises environments with AWS Cloud storage.

| Gateway Type | Description |
|---------------|--------------|
| **File Gateway** | Store/retrieve objects in S3 as files via NFS/SMB |
| **Volume Gateway** | Backup on-prem block storage to AWS |
| **Tape Gateway** | Replace physical tape libraries with virtual tapes in AWS |

![Storage Gateway Architecture](hybrid_storage.png)  
> **Reference:** [AWS Storage Gateway](https://docs.aws.amazon.com/storagegateway/latest/userguide/WhatIsStorageGateway.html)

---

## 🚚 AWS Snow Family

Used for **data migration** when network transfer is slow or impossible.

| Device | Capacity | Use Case |
|---------|-----------|----------|
| **Snowcone** | 8 TB | Edge computing, small data transfer |
| **Snowball Edge** | 80–210 TB | Large-scale migration, edge processing |
| **Snowmobile** | 100 PB | Massive data transfer via truck |

![Snow Family Devices](snow_family.png)  
> **Reference:** [AWS Snow Family](https://aws.amazon.com/snow/)

---

## 🎯 AWS Certification Q&A — EFS, Glacier & Storage Gateway

**1. What type of storage is EFS?**  
👉 File storage supporting NFS protocol.

**2. Can multiple EC2 instances access the same EFS?**  
👉 ✅ Yes, EFS supports simultaneous multi-instance access.

**3. Is EFS regional or AZ specific?**  
👉 Regional (spans multiple AZs).

**4. What’s the difference between EFS and EBS?**  
👉 EFS = shared & scalable file storage, EBS = single-instance block storage.

**5. What is S3 Glacier used for?**  
👉 Long-term data archiving and backup with low cost and slow retrieval.

**6. Which service bridges on-prem with AWS storage?**  
👉 AWS Storage Gateway.

**7. Which AWS service transfers petabytes of data physically?**  
👉 AWS Snow Family (Snowball, Snowmobile).

---
