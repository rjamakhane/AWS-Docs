# ðŸŒ AWS IAM Deep Dive Notes

---

## ðŸ”‘ Introduction to AWS IAM (Identity and Access Management)

AWS IAM (Identity and Access Management) is a global service that enables you to securely control access to AWS resources for your users. It provides **fine-grained access control** and integrates with nearly all AWS services.

---

## ðŸ§  Core Concepts of IAM

| Concept | Description |
|----------|--------------|
| **Users** | Individuals or applications that need access to AWS resources. |
| **Groups** | Collections of users that share the same permissions. |
| **Roles** | Temporary identities that can be assumed by users, applications, or services. |
| **Policies** | JSON documents defining permissions (Allow or Deny). |

**Example Policy (JSON):**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:ListBucket",
      "Resource": "arn:aws:s3:::my-bucket"
    }
  ]
}
```

---

## ðŸ§© IAM Features Overview

- âœ… Centralized control of AWS accounts  
- ðŸ§ User and group management  
- ðŸªª Role-based access for EC2, Lambda, etc.  
- ðŸ” Multi-Factor Authentication (MFA) support  
- ðŸ” Temporary security credentials via STS  
- ðŸ§¾ Integration with AWS Organizations  

---

## âš™ï¸ IAM Access Types

| Access Type | Description |
|--------------|--------------|
| **Console Access** | Sign in using username & password through AWS Console. |
| **Programmatic Access** | Use Access Key ID & Secret Access Key via CLI, SDKs, or APIs. |

---

## ðŸ” IAM Best Practices

1. ðŸ§± **Follow the Principle of Least Privilege.**  
   Only grant users the permissions they need.  

2. ðŸ”’ **Enable MFA (Multi-Factor Authentication)** for all accounts, especially the root user.  

3. ðŸª£ **Use IAM Roles** instead of long-term access keys for EC2/Lambda.  

4. ðŸ§¾ **Rotate access keys regularly.**  

5. ðŸ§  **Use IAM Policy Simulator** to test permissions.  

6. ðŸ§â€â™‚ï¸ **Never share credentials across accounts.**  

7. ðŸ§° **Enable CloudTrail logs** to audit IAM activity.  

---

## ðŸ’¡ IAM Roles vs Users vs Groups

| Feature | User | Group | Role |
|----------|------|--------|------|
| Permanent Credentials | âœ… | âœ… | âŒ |
| Temporary Credentials | âŒ | âŒ | âœ… |
| Intended For | Humans | Collection of Users | AWS Services / Federated Users |
| MFA Support | âœ… | âœ… | âŒ |

---

## ðŸ§® Example: Assign Role to EC2

1. Create a **Role** in IAM â†’ choose **EC2** as trusted entity.  
2. Attach **AmazonS3ReadOnlyAccess** policy.  
3. Launch EC2 instance and attach the role.  
4. Run inside EC2:
   ```bash
   aws s3 ls
   ```
   âœ… The instance can now list S3 buckets **without any credentials**.

---

## ðŸ§° IAM Policy Evaluation Logic

IAM checks permissions in this order:

1. **Explicit Deny** â†’ Always wins.  
2. **Explicit Allow** â†’ If no deny, then allow.  
3. **Implicit Deny** â†’ Default when no policy allows.

---

## âš¡ CLI Commands Cheat Sheet

```bash
# List users
aws iam list-users

# Create user
aws iam create-user --user-name demo-user

# Attach policy
aws iam attach-user-policy --user-name demo-user --policy-arn arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess

# Create access key
aws iam create-access-key --user-name demo-user
```

---

# ðŸŽ“ AWS Solution Architect â€“ IAM Certification Q&A

---

### ðŸ§© **Q1: What is IAM and why is it important?**
**A:** IAM (Identity and Access Management) helps you manage access to AWS services securely. It allows defining **who can do what** in your AWS environment â€” crucial for securing multi-user, multi-service setups.

---

### ðŸ§¾ **Q2: Whatâ€™s the difference between IAM roles and users?**
**A:**  
- IAM **users** have **long-term credentials** (Access Key, Password).  
- IAM **roles** provide **temporary credentials**, ideal for EC2 or Lambda to access resources securely.

---

### ðŸ§± **Q3: What is the IAM Policy Simulator used for?**
**A:** It allows you to test and validate permissions granted by policies **before deploying them** in production.

---

### ðŸ§© **Q4: Can IAM policies deny actions explicitly?**
**A:** Yes. Any **Explicit Deny** in a policy **overrides** all allows, ensuring strict security enforcement.

---

### ðŸ” **Q5: Whatâ€™s the difference between managed and inline policies?**
| Type | Description |
|------|--------------|
| **Managed Policy** | Standalone policies attached to multiple users or roles. |
| **Inline Policy** | Embedded directly into a single user, group, or role. |

---

### ðŸªª **Q6: What is AWS STS (Security Token Service)?**
**A:** AWS STS issues **temporary security credentials** for trusted users or federated access. Common API: `AssumeRole`.

---

### ðŸ§° **Q7: What is the maximum number of IAM roles per account?**
**A:** 1,000 roles (default quota, can be increased upon request).

---

### âš™ï¸ **Q8: What are IAM Access Analyzer and its use?**
**A:** IAM Access Analyzer identifies **resources shared with external entities**, helping to detect unintended public or cross-account access.

---

### ðŸ“‹ **Q9: What happens if a user has multiple policies (one allows, one denies)?**
**A:** The **explicit deny** always overrides any allow permissions.

---

### ðŸ§  **Q10: What is the AWS root user and how should it be protected?**
**A:** The root user has **full account access**. Protect it by:  
- Enabling **MFA**,  
- Avoiding daily use,  
- Creating **Admin IAM Users** for routine tasks.

---

### ðŸ§¾ **Q11: What is a Service-Linked Role?**
**A:** A special role linked directly to an AWS service (e.g., EC2, RDS) that allows it to perform actions on your behalf.

---

### âš¡ **Q12: Can IAM roles be assumed across AWS accounts?**
**A:** Yes. You can create **cross-account roles** by defining a trust policy that allows a user or service from another account to assume the role.

---

### ðŸ§° **Q13: Which policy grants full admin access to all AWS resources?**
**A:** `arn:aws:iam::aws:policy/AdministratorAccess`

---

### ðŸŽ¯ **Q14: What is an Identity Provider (IdP) in IAM?**
**A:** An IdP (like Google, Okta, or Active Directory) lets you **federate identities** into AWS via **SAML or OIDC**.

---

### ðŸ”’ **Q15: What are IAM credential reports used for?**
**A:** They list all users and show details about their password and access key usage â€” helping identify unused credentials.

---

# ðŸ§­ Summary

âœ… IAM is a **global service** providing secure, fine-grained access control.  
âœ… Use **roles** for applications, **users** for individuals, and **policies** for permissions.  
âœ… Always follow **least privilege**, use **MFA**, and **monitor IAM activity** with CloudTrail.

---

> ðŸ’¡ **Pro Tip:** In the AWS Solution Architect exam, IAM questions often focus on **roles, MFA, STS, and cross-account access**. Practice understanding **policy evaluation flow** and **permission boundaries**.

---

**Created with â¤ï¸ for AWS learners and Solution Architects preparing for certification.**